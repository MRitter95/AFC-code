# Scripts contained in folder

- Helper functions
	- avgByNs:
	avgByNs groups 1D array by Ns and averages those Ns. Result is an array that is N times shorter
        - function parameters
            - Input: input_array array to be shortened
            - Input: N2groupAndAvg, number of points to average

	- combAnalysisDouble:
	This script combines the low and high frequency sweeps into one comb and takes the fourier transform of the result. It also returns the probe sweeps from plotting and debugging purposes
        - function parameters
            - Input: afcfile, file name for afc data
            - Input: probefile, file name for probe data
            - Input: sweep1, range of first probe sweep ([start stop] format)
            - Input: sweep2, range of second probe sweep ([start stop] format)
            - Input: sweepspeed, sweeprate of probe in MHz/s
            - Output: freq/ amp are the fourier transformed frequency and amplitude of the combs
            - Output: freqT/ ampT contains the data for the combined comb, normalized to max value
            - Output: probe(1-2)/freqaxisp(1-2) contains the probe information for plotting

	- combineCombs
	This function combines two comb sweeps into a single comb for further analysis. The function expects arrays of frequency and amplitudes for each comb, finds the overlap region and concatenates the three regions together (comb1, (comb1+comb2)/2, comb2).
        - function parameters
            - Input: freqaxisp(1-2) frequency axis of comb(1-2)
            - Input: amp(1-2) amplitudes of comb(1-2)
            - Input: probe(1-2) probe amplitudes (used for normalization)
            - Output: freq, combined frequency axis of the full sweep
            - Output: spec, combined amplitudes of the comb

	- doAvg:
	The function takes in a list of datafile names (generated by the dir command) and performs a running average. The function also returns some scaling parameters for the LeCroy traces
        - function parameters
            - Input: data, list of filenames of data to process in a folder (.trc or .txt)
            - Input: RSArange, range of the RSA (300 or 600 MHz typically)
            - Input: numtoskip, number of traces to skip before starting averaging
            - Output: xaxis, time or frequency data from trace (depends on trace type)
            - Output: yaxis, averaged amplitudes of traces
            - Output: xint, xoff, time step and time offset of LeCroy samples
            - Output: ygain, yoff, scale factor and y offset for LeCroy amplitudes

	- findEl:
	Quick and dirty function to find the element in an array. If the element doesn't exist, the function returns the closest index in the array. Written because Matlab's 'find' function wasn't working well and this does. Takes in an array and a value to find in it and does basic out of range error checking on the index
        - function parameters
            - Input: array, array of values (must be evenly spaced)
            - Input: val, value to find in array
            - Output: index, location of value searched for

	- findTones2:
	locates calibration tones. might need to play with thresholds in case it doesn't work for all data sets, but I think I left pretty large tolerances.
        - function parameters
            - Input: scopeData, LeCroy trace containing timing tones (we use probe trace)
            - Input: verbose, boolean controlling how much output the function prints out
            - Output: toneTimes, list of indices of the FALLING edges of the square tones

	- powermeter:
	This script was used to average powermeter readings
        - function parameters
            - Input: file, txt file containing all the readings
            - Input: numavg, number of readings per frequency setting
            - Output: freqs, array of modulation frequencies used
            - Output: avgval, array of the averaged values at each frequency

	- sort\_nat:
    Mathworks function. Sorts folders in the 'natural' order (i.e if folders are '100MHz','1000MHz', and '200MHz' it outputs 100 200 1000 whereas the standard dir listing will output 100 1000 200
        - function parameters
            - Input:  C, list of things to be sorted
            - Output: S, sorted array
            - Output: INDEX, indices such that S=C(INDEX)

- Reading functions
	- readbin:
	This helper function reads in the binary files created by combineFiles.m and returns the x-y data in a data structure. The stored data for the LeCroy waveforms needs some processing to turn it back into voltages and return time
        - function parameters
            - Input: inputfile, name of the file to be read
            - Input: islecroy, boolean indicating if the base file is a lecroy trace
            - Output: data, structure orgranized to return the same format as ReadLeCroyBinaryWaveform. X data is accessed by data.x and so is Y data

	- ReadLeCroyBinaryWaveform:
	read binary waveform file created by a LeCroy Oscilloscope
        - function parameters
            - Input: waveform name (string or variable)
            - Output: waveform structure
                waveform.INFO   Waveform information, in readable formats. For example Oscilloscope ID, sampling time and settings
                waveform.DESC   Waveform information used for further calculations. For example Sampling rate
                waveform.Y      Values sampled by the oscilloscope
                waveform.X      Array of time values corresponding to waveform.Y. Time '0' marks the trigger event

	- ReadLeCroyBinaryWaveformExtra:
    Identical to ReadLecroyBinaryWaveform except for the fact that it returns the conversion factors as well to allow us to convert voltages back into ADC values and store time using time interval and offset values
        - function parameters
            - Input : waveform name
            - Output: wave (as describe in ReadLecroyBinaryWaveform)
            - Output: xint/ xoff scaling parameters for time axis
            - Output: ygain/ yoff scaling parameters for y axis

- Plotting functions
	- quickscopeplotter:
	This quick script will plot all the C1 traces with a given name and show them on the same plot. 
        - function parameters
            - Input: userpath, path to traces
            - Input: step, vertical shift used to plot consecutive traces
            - Output: none, generates a figure

	- specDraw:
	Simple function to plot RSA data (saved in .txt format)
        - function parameters
            - Input: inputfile, .txt file with RSA data
            - Input: startfreq, starting frequency of RSA sweep
            - Input: endfreq, ending frequency of RSA sweep
            - Output: none, draws figure to screen
